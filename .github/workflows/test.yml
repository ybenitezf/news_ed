name: Release on Tag

on:
  push:
    tags:
      - "v*.*.*"

jobs:
  build-and-release:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository code
        uses: actions/checkout@v3

      # Extract the version part from the tag name
      - name: Extract version from tag
        run: |
          VERSION=$(echo "${GITHUB_REF}" | sed 's/^refs\/tags\/v//')
          echo "version=$VERSION" >> $GITHUB_ENV

      - name: Print the extracted version
        run: |
          echo "Extracted version: ${env.VERSION}"
